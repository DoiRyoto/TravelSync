# 画面仕様書：トップページ（旅行プラン作成フォーム）

## 基本情報

| 項目 | 内容 |
|------|------|
| 画面名 | トップページ（旅行プラン作成フォーム） |
| 画面ID | TOP-001 |
| URL | `/` |
| 作成日 | 2024-12-19 |
| 更新日 | 2024-12-19 |
| 担当者 | Claude AI |

## 画面概要

Culture Syncアプリケーションのトップページ。ユーザーが文化体験に特化した旅行プランを作成するためのマルチステップフォーム画面です。5つのステップに分かれており、段階的に情報を入力することで、パーソナライズされた旅行プランを生成します。

## Figma デザイン

**デザインモック：** [Figma - Culture Sync Top Page](https://www.figma.com/file/mock-culture-sync-top-page)
*（モックリンク - 実際のプロジェクトでは実際のFigmaファイルを参照）*

## 画面構成

### 1. ヘッダー部分
- **コンポーネント：** `Header`
- **位置：** 画面上部固定
- **機能：** アプリケーションのブランディングとナビゲーション

### 2. メインタイトル
- **テキスト：** "あなただけの文化体験旅行プラン"
- **スタイル：** グラデーションテキスト（blue-600 → purple-600）
- **フォントサイズ：** 4xl（36px）
- **位置：** 中央揃え

### 3. サブタイトル
- **テキスト：** "現地文化・習慣を踏まえた、パーソナライズされた旅行プランを作成します"
- **フォントサイズ：** lg（18px）
- **色：** text-muted-foreground
- **位置：** 中央揃え

### 4. ステップインジケーター
- **コンポーネント：** `StepIndicator`
- **総ステップ数：** 5
- **表示内容：**
  1. 目的地（どこに行く？）- Globe アイコン
  2. 基本情報（いつ・どのくらい？）- Calendar アイコン
  3. 旅行者情報（誰と行く？）- Users アイコン
  4. 旅行スタイル（何をしたい？）- Target アイコン
  5. 確認（プラン生成）- Sparkles アイコン

### 5. フォーム表示エリア
各ステップに応じたフォームコンポーネントを表示

#### Step 1: 目的地選択
- **コンポーネント：** `Step1Destination`
- **機能：**
  - 国名検索可能な入力フィールド
  - 候補リストからの選択
  - 選択済み目的地の表示
- **バリデーション：** 必須入力

#### Step 2: 基本情報
- **コンポーネント：** `Step2BasicInfo`
- **機能：**
  - 旅行時期選択（春/夏/秋/冬/柔軟）
  - 旅行期間選択（日帰り〜1ヶ月）
- **バリデーション：** 両項目必須

#### Step 3: 旅行者情報
- **コンポーネント：** `Step3TravelerInfo`
- **機能：**
  - 旅行タイプ選択（一人旅/カップル/家族/友人/ビジネス）
  - 年齢層選択（10代〜50代以上）
  - 旅行経験レベル選択（初心者/中級者/上級者）
- **バリデーション：** 全項目必須

#### Step 4: 旅行スタイル
- **コンポーネント：** `Step4TravelStyle`
- **機能：**
  - 旅行の目的選択（最大3つ）
  - 興味のあること選択（最大5つ）
  - 予算レベル選択
  - 文化情報の詳しさ選択
  - 特別な要望入力（任意）
- **バリデーション：** 目的・興味・予算・文化情報は必須

#### Step 5: 確認
- **コンポーネント：** `Step5Confirmation`
- **機能：**
  - 全入力内容の確認表示
  - プラン生成ボタン
- **アクション：** 旅行プラン生成・結果画面へ遷移

### 6. エラー表示エリア
- **コンポーネント：** `Alert`
- **表示条件：** バリデーションエラーがある場合
- **スタイル：** destructive variant
- **内容：** エラーメッセージ一覧

### 7. ナビゲーションボタン
- **前に戻るボタン：**
  - 表示条件：ステップ2以降
  - スタイル：outline variant
  - アイコン：ArrowLeft
- **次に進むボタン：**
  - 表示条件：ステップ1〜4
  - 活性条件：現在ステップのバリデーションが通過
  - アイコン：ArrowRight

## 状態管理

### フォームデータ（TravelFormData）
```typescript
{
  destination: string,           // 目的地ID
  duration: number,             // 旅行期間（日数）
  season: string,               // 旅行時期
  travelerCount: number,        // 旅行者数
  travelerType: string,         // 旅行タイプ
  ageGroup: string,            // 年齢層
  experienceLevel: string,      // 旅行経験レベル
  purposes: string[],          // 旅行の目的（最大3つ）
  interests: string[],         // 興味のあること（最大5つ）
  budgetLevel: string,         // 予算レベル
  culturalLevel: string,       // 文化情報の詳しさ
  specialRequests?: string     // 特別な要望（任意）
}
```

### 画面状態
- `currentStep`: number - 現在のステップ（1-5）
- `loading`: boolean - プラン生成処理中フラグ
- `destinationInput`: string - 目的地検索入力値

## バリデーションルール

| フィールド | ルール | エラーメッセージ |
|------------|--------|------------------|
| destination | 必須 | "目的地を選択してください" |
| duration | 必須、1以上 | "期間を選択してください" |
| season | 必須 | "旅行時期を選択してください" |
| travelerType | 必須 | "旅行タイプを選択してください" |
| ageGroup | 必須 | "年齢層を選択してください" |
| experienceLevel | 必須 | "旅行経験を選択してください" |
| purposes | 必須、1-3個 | "旅行の目的を選択してください（最低1つ）" / "旅行の目的は最大3つまでです" |
| interests | 必須、1-5個 | "興味のあることを選択してください（最低1つ）" / "興味は最大5つまでです" |
| budgetLevel | 必須 | "予算レベルを選択してください" |
| culturalLevel | 必須 | "文化情報の詳しさを選択してください" |

## インタラクション仕様

### ステップ遷移
1. **次へ進む：** 現在ステップのバリデーション通過時のみ可能
2. **前へ戻る：** ステップ2以降で常に可能（データは保持）
3. **ステップスキップ：** 不可（順番通りに進行必須）

### フォーム送信
- **トリガー：** Step5の「旅行プランを生成する」ボタン
- **処理：** `/plan/${destination}`へリダイレクト（クエリパラメータ付き）
- **ローディング：** ボタンテキスト変更 + スピナー表示

## レスポンシブ対応

### ブレークポイント
- **モバイル：** 〜767px
- **タブレット：** 768px〜1023px
- **デスクトップ：** 1024px〜

### モバイル対応
- ステップインジケーター：プログレスバー形式に変更
- グリッドレイアウト：1カラムに変更
- フォントサイズ：調整
- パディング・マージン：最適化

### タッチ対応
- ボタンサイズ：最小44px×44px
- タッチ範囲：適切な余白確保

## パフォーマンス要件

- **初期読み込み：** 2秒以内
- **ステップ遷移：** 即座（同期処理）
- **フォーム送信：** 5秒以内（プラン生成含む）

## アクセシビリティ

- **キーボード操作：** 全機能対応
- **スクリーンリーダー：** aria-label等の適切な設定
- **カラーコントラスト：** WCAG 2.1 AA準拠
- **フォーカス表示：** 明確な視覚的フィードバック

## エラーハンドリング

### 入力エラー
- リアルタイムバリデーション
- 各フィールド個別エラー表示
- 画面上部に集約エラー表示

### システムエラー
- ネットワークエラー時の再試行
- タイムアウト時の適切なメッセージ

## 多言語対応

- **デフォルト：** 日本語
- **文字列管理：** i18nライブラリ使用予定
- **レイアウト調整：** 各言語の文字数に対応

## SEO対策

- **タイトル：** "文化体験旅行プラン作成 | Culture Sync"
- **メタディスクリプション：** "現地の文化・習慣を踏まえたパーソナライズ旅行プランを作成。"
- **構造化データ：** JSON-LD形式でのマークアップ

## テスト項目

### 機能テスト
- [ ] 各ステップでの入力・選択機能
- [ ] ステップ遷移機能
- [ ] バリデーション機能
- [ ] フォーム送信機能

### UIテスト
- [ ] レスポンシブ表示確認
- [ ] 各ブラウザでの表示確認
- [ ] アクセシビリティチェック

### パフォーマンステスト
- [ ] 読み込み速度測定
- [ ] メモリ使用量確認

## 備考

- 本画面は Culture Sync アプリケーションのメイン機能を担う重要な画面です
- ユーザビリティを重視し、直感的な操作を実現しています
- 文化体験に特化した項目設計により、従来の旅行サイトとの差別化を図っています