# ホームページ仕様

この画面は、ユーザーがパーソナライズされた文化体験旅行プランを作成するためのマルチステップフォームです。ユーザーは5つのステップを通じて旅行の詳細を入力し、最終的に文化情報を踏まえた旅行プランを生成できます。

# 画面仕様

## デフォルト画面
[Figmaのフレームのリンク]

## 入力項目一覧

| 項目名 | 必須 | 種別 | デフォルト | 文字種 | 文字数 | 説明 |
| -------- | ----------- | ------ | -------------- | -------- | -------- | ------ |
| destination | 必須 | 選択 | 空文字 | 英数字 | - | 目的地の国ID |
| duration | 必須 | 数値 | 3 | 数値 | - | 旅行期間（日数） |
| season | 必須 | 選択 | 空文字 | 文字列 | - | 旅行時期 |
| travelerCount | 必須 | 数値 | 2 | 数値 | - | 旅行者数 |
| travelerType | 必須 | 選択 | 空文字 | 文字列 | - | 旅行タイプ |
| ageGroup | 必須 | 選択 | 空文字 | 文字列 | - | 年齢層 |
| experienceLevel | 必須 | 選択 | 空文字 | 文字列 | - | 旅行経験レベル |
| purposes | 必須 | 複数選択 | [] | 文字列配列 | 1-3個 | 旅行の目的 |
| interests | 必須 | 複数選択 | [] | 文字列配列 | 1-5個 | 興味のあること |
| budgetLevel | 必須 | 選択 | 空文字 | 文字列 | - | 予算レベル |
| culturalLevel | 任意 | 選択 | "standard" | 文字列 | - | 文化情報の詳しさ |
| specialRequests | 任意 | テキスト | 空文字 | 自由文字 | - | 特別なリクエスト |

## バリデーション一覧

| エラー概要 | エラーメッセージ | エラー原因 |
| ------------ | ------------------ | ------------ |
| 目的地未選択 | "目的地を選択してください" | destinationが空文字 |
| 期間未設定 | "期間を選択してください" | durationが1未満 |
| 旅行時期未選択 | "旅行時期を選択してください" | seasonが空文字 |
| 旅行者数未設定 | "旅行者数を入力してください" | travelerCountが1未満 |
| 旅行タイプ未選択 | "旅行タイプを選択してください" | travelerTypeが空文字 |
| 年齢層未選択 | "年齢層を選択してください" | ageGroupが空文字 |
| 旅行経験未選択 | "旅行経験を選択してください" | experienceLevelが空文字 |
| 目的未選択 | "旅行の目的を選択してください（最低1つ）" | purposesが空配列 |
| 目的超過 | "旅行の目的は最大3つまでです" | purposesが3個超過 |
| 興味未選択 | "興味のあることを選択してください（最低1つ）" | interestsが空配列 |
| 興味超過 | "興味は最大5つまでです" | interestsが5個超過 |
| 予算未選択 | "予算レベルを選択してください" | budgetLevelが空文字 |
| 文化レベル未選択 | "文化情報の詳しさを選択してください" | culturalLevelが空文字 |
| ステップ進行不可 | ボタン無効化（視覚的フィードバック） | 現在ステップのバリデーション未通過 |

## 備考

| 項目 | 内容 |
| ------ | ------ |

## 使用メソッド

| 項目名 | 機能 |
| ------------ | ---------- |
| nextStep | 次のステップに進む（バリデーション実行後） |
| prevStep | 前のステップに戻る |
| updateFormData | フォームデータを更新 |
| toggleArrayValue | 配列値の追加・削除を切り替え |
| handlePurposeToggle | 旅行目的の選択を切り替え |
| handleInterestToggle | 興味の選択を切り替え |
| getFieldsForStep | ステップごとのバリデーション対象フィールドを取得 |
| isStepValid | ステップの入力内容が有効かチェック |
| onSubmit | フォーム送信処理（プランページへ遷移） |
| renderStep | 現在のステップに対応するコンポーネントを描画 |

## エラー／例外ケース

| エラー概要 | エラーメッセージ | エラー原因 |
| ------------ | ------------------ | ------------ |
| プラン生成失敗 | コンソールエラー出力 | ルーター遷移エラー |
| 国データ不整合 | データ不整合（サイレント） | 選択された国IDがcountriesに存在しない |

## 権限による表示制御

| 権限 | アクセス可能URL | 表示内容 |
| -------- | ----------------- | ---------- |
| 全ユーザー | / | 全機能利用可能 |

## 状態／シナリオ別表示仕様

| 状態／シナリオ | 条件 | Figmaのフレームのリンク | 備考 |
| -------------- | ------------------------------ | ------------------------------------ | ------------------------ |
| 初期表示 | ページ読み込み時 | [Figmaのフレームのリンク] | Step1が表示、全項目デフォルト値 |
| Step1完了状態 | destination選択済み | [Figmaのフレームのリンク] | 次に進むボタンが有効化 |
| Step2表示状態 | Step1完了後 | [Figmaのフレームのリンク] | 前に戻るボタンが表示 |
| Step3表示状態 | Step2完了後 | [Figmaのフレームのリンク] | 旅行者情報入力フォーム |
| Step4表示状態 | Step3完了後 | [Figmaのフレームのリンク] | 旅行スタイル選択フォーム |
| Step5表示状態 | Step4完了後 | [Figmaのフレームのリンク] | 確認画面、プラン生成ボタン |
| ローディング状態 | プラン生成中 | [Figmaのフレームのリンク] | ボタンがローディング表示 |
| エラー表示状態 | バリデーションエラー発生時 | [Figmaのフレームのリンク] | エラーアラートが表示 |

# 画面遷移元

| 権限 | 遷移元 | アクション |
| -------- | -------- | ------------ |
| 全ユーザー | 直接アクセス | URL直接入力またはブックマーク |
| 全ユーザー | ヘッダーロゴ | ロゴクリック |